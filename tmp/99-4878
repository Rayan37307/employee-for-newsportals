async function testCardGeneration() {
  console.log('Testing Card Generation...');

  try {
    console.log('Fetching news...');
    const articles = await getLatestNews();

    if (articles.length === 0) {
      console.log('No articles found to generate cards for');
      return;
    }

    console.log(`Number of articles found: ${articles.length}`);

    const article = articles[0];
    console.log(`\nGenerating card for article: ${article.title}`);

    const { generateCardImageNew } = await import('@/lib/konva-card-generator');
    const { createDefaultTemplate } = await import('@/lib/template-utils');

    const template = createDefaultTemplate();
    const newsItem = {
      title: article.title,
      date: article.date || new Date().toLocaleDateString('en-US', { 
        weekday: 'long', 
        year: 'numeric', 
        month: 'long', 
        day: 'numeric' 
      }),
      image: article.image || ''
    };

    console.log('Generating card image...');
    const cardBuffer = await generateCardImageNew({
      template: template,
      mapping: {},
      newsItem: newsItem
    });

    console.log(`Card generated successfully: ${cardBuffer.length} bytes`);
  } catch (error) {
    console.error('Test failed with error:', error);
  }
}
